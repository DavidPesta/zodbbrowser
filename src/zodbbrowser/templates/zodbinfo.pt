<metal:block metal:use-macro="view/@@zodbbrowser_macros/page">
<metal:block fill-slot="content">

<tal:block define="object view/obj">
  <div class="object">
    <tal:block tal:condition="object/state" define="state object/state">
      <div class="heading">
        <h1>
          <span tal:content="object/getPath"></span><br/>
          <span tal:condition="not:object/current"
                tal:content="string:From transaction ${view/getObjectTid}"
                style="color:white"/>
          <br/>
          <span tal:condition="not:object/current"
                tal:content="string:Aligned to transaction
                    ${view/getObjectRequestedTid}"
                style="color:white"/>
        </h1>
        <h2><i tal:content="view/getObjectType"/></h2>
      </div>
      <div class="attributes" tal:condition="object/listAttributes">
        <h3>Attributes</h3>
        <input type="button" value="-" onclick="expand(this)" />
        <h4>
          <tal:block tal:repeat="attr object/listAttributes">
            <strong tal:content="attr/name" />:
            <tal:block replace="structure attr/rendered_value" />
            <br />
          </tal:block>
        </h4>
      </div>
    </tal:block>

    <div class="history" tal:condition="object/listHistory">
      <h3>History</h3>
      <input type="button" value="-" onclick="expand(this)" />
      <h4>
        <span tal:condition="not:view/getObjectRequestedTid">-&gt;</span>
        <a tal:attributes="href string:zodbinfo.html?oid=${view/getObjectId}"
           tal:content="string:Head"/><br />
        <tal:block tal:repeat="history object/listHistory">
          <span tal:condition="history/current">-&gt;</span>
          <a tal:attributes="href history/href"
            tal:content="string:#${repeat/history/index} (${history/utid})"></a>
          <strong tal:content="history/short" />
          <br />
          <tal:block tal:repeat="diff history/diff">
            <span tal:content="diff" />
            <br />
          </tal:block>
        </tal:block>
      </h4>
    </div>
  </div>
</tal:block>

</metal:block>
</metal:block>
